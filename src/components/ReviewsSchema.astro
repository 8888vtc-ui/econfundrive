---
// Schema.org pour les avis clients
interface Props {
  reviews?: Array<{
    author: string;
    rating: number;
    reviewBody: string;
    datePublished?: string;
  }>;
}

const { reviews = [] } = Astro.props;

// Avis par défaut si aucun fourni
const defaultReviews = reviews.length > 0 ? reviews : [
  {
    author: "Client vérifié",
    rating: 5,
    reviewBody: "Service impeccable, ponctualité parfaite. David est un chauffeur professionnel et très agréable.",
    datePublished: "2024-01-15"
  }
];

const reviewSchema = {
  "@type": "LocalBusiness",
  "@id": "https://www.ecofundrive.com/#localbusiness",
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "5.0",
    "reviewCount": defaultReviews.length.toString(),
    "bestRating": "5",
    "worstRating": "1"
  },
  "review": defaultReviews.map(item => ({
    "@type": "Review",
    "author": {
      "@type": "Person",
      "name": item.author
    },
    "datePublished": item.datePublished || new Date().toISOString(),
    "reviewBody": item.reviewBody,
    "reviewRating": {
      "@type": "Rating",
      "ratingValue": item.rating.toString(),
      "bestRating": "5"
    }
  }))
};
---

<script type="application/ld+json" set:html={JSON.stringify(reviewSchema)} />


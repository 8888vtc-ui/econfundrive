---
import BaseLayout from '../layouts/BaseLayout.astro';
import SectionImageText from '../components/SectionImageText.astro';

const title = "Contact | ECOFUNDRIVE – Chauffeur Privé VTC Côte d'Azur";
const description = "Contactez ECOFUNDRIVE pour réserver votre chauffeur privé VTC sur la Côte d'Azur. Service professionnel 24h/24. Téléphone, WhatsApp, email.";
const keywords = [
  'VTC',
  "VTC Côte d'Azur",
  'chauffeur privé',
  'contact VTC',
  'transfert aéroport',
  'transport premium'
];

const breadcrumbItems = [
  { name: "Accueil", url: "/" },
  { name: "Contact", url: "/contact" }
];
---

<BaseLayout 
  title={title}
  description={description}
  keywords={keywords}
  currentPage="contact"
  canonical="/contact"
  breadcrumbItems={breadcrumbItems}
>
  <main id="main-content">
    <div class="container">
      <section class="contact-hero">
        <h1>Contactez ECOFUNDRIVE</h1>
        <p class="lead">Disponible 24h/24 et 7j/7 pour tous vos déplacements sur la Côte d'Azur</p>
      </section>

      <div class="contact-grid">
        <section class="contact-form-section">
          <h2>Envoyez-nous un message</h2>
          <p>Remplissez le formulaire ci-dessous et nous vous répondrons dans les plus brefs délais.</p>
          
          <form name="contact" method="POST" data-netlify="true" netlify-honeypot="bot-field" class="contact-form" id="contact-form">
            <input type="hidden" name="form-name" value="contact" />
            <p class="hidden">
              <label>
                Ne remplissez pas ce champ si vous êtes humain : <input name="bot-field" />
              </label>
            </p>

            <div class="form-group">
              <label for="nom">Nom complet *</label>
              <input 
                type="text" 
                id="nom" 
                name="nom" 
                required 
                placeholder="Votre nom"
                aria-required="true"
              />
            </div>

            <div class="form-group">
              <label for="email">Email *</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                required 
                placeholder="votre@email.com"
                aria-required="true"
              />
            </div>

            <div class="form-group">
              <label for="telephone">Téléphone *</label>
              <input 
                type="tel" 
                id="telephone" 
                name="telephone" 
                required 
                placeholder="06 12 34 56 78"
                aria-required="true"
              />
            </div>

            <div class="form-group">
              <label for="sujet">Sujet *</label>
              <select id="sujet" name="sujet" required aria-required="true">
                <option value="">Sélectionnez un sujet</option>
                <option value="reservation">Réservation VTC</option>
                <option value="transfert-aeroport">Transfert aéroport</option>
                <option value="service-entreprise">Service entreprise</option>
                <option value="mariage-evenement">Mariage / Événement</option>
                <option value="devis">Demande de devis</option>
                <option value="autre">Autre demande</option>
              </select>
            </div>

            <div class="form-group">
              <label for="message">Message *</label>
              <textarea 
                id="message" 
                name="message" 
                rows="6" 
                required 
                placeholder="Décrivez votre demande (date, heure, lieu de départ, destination, nombre de passagers...)"
                aria-required="true"
              ></textarea>
            </div>

            <div class="form-group">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  name="rgpd" 
                  required 
                  aria-required="true"
                />
                <span>J'accepte que mes données soient utilisées pour répondre à ma demande (conformément au RGPD) *</span>
              </label>
            </div>

            <button type="submit" class="btn btn-primary">
              Envoyer le message
            </button>

            <div id="form-message" class="form-message" role="alert" aria-live="polite"></div>
          </form>
        </section>

        <section class="contact-info-section">
          <h2>Nos coordonnées</h2>
          
          <div class="contact-methods">
            <div class="contact-method">
              <div class="contact-icon">📞</div>
              <div class="contact-details">
                <h3>Téléphone</h3>
                <p><a href="tel:+33616552811">06 16 55 28 11</a></p>
                <p class="contact-note">Disponible 24h/24 et 7j/7</p>
              </div>
            </div>

            <div class="contact-method">
              <div class="contact-icon">💬</div>
              <div class="contact-details">
                <h3>WhatsApp</h3>
                <p><a href="https://wa.me/33616552811" target="_blank" rel="noopener noreferrer">Envoyer un message WhatsApp</a></p>
                <p class="contact-note">Réponse rapide garantie</p>
              </div>
            </div>

            <div class="contact-method">
              <div class="contact-icon">✉️</div>
              <div class="contact-details">
                <h3>Email</h3>
                <p><a href="mailto:8888VTC@gmail.com">8888VTC@gmail.com</a></p>
                <p class="contact-note">Réponse sous 24h</p>
              </div>
            </div>
          </div>

          <div class="contact-cta">
            <h3>Besoin d'une réponse immédiate ?</h3>
            <p>Appelez-nous directement ou contactez-nous via WhatsApp pour une réponse instantanée.</p>
            <div class="contact-buttons">
              <a href="tel:+33616552811" class="btn btn-primary">Appeler maintenant</a>
            </div>
          </div>
        </section>
      </div>

      <SectionImageText
        title="Service disponible 24h/24"
        image="/assets/img/hero/hero-aeroport-nice.webp"
        alt="Service VTC disponible jour et nuit"
        imageSide="left"
        ctaText="Réserver maintenant"
        ctaLink="https://wa.me/33616552811"
      >
        <p>
          Que votre vol arrive tard dans la nuit ou que vous ayez besoin d'un service tôt le matin, ECOFUNDRIVE est là pour vous. Nous assurons des transferts à toute heure, 7 jours sur 7.
        </p>
        <ul>
          <li>Disponibilité 24h/24 et 7j/7</li>
          <li>Réponse rapide à vos demandes</li>
          <li>Confirmation immédiate de votre réservation</li>
          <li>Suivi en temps réel de votre chauffeur</li>
        </ul>
      </SectionImageText>

      <SectionImageText
        title="Zones desservies"
        image="/assets/img/destinations/destination-nice.webp"
        alt="Côte d'Azur - Zones desservies"
        imageSide="right"
        ctaText="Voir nos destinations"
        ctaLink="/services"
      >
        <p>
          ECOFUNDRIVE dessert l'ensemble de la Côte d'Azur : Nice, Cannes, Monaco, Saint-Tropez, Antibes, Grasse, Menton, et bien d'autres destinations.
        </p>
        <p>
          Nous assurons également les transferts vers les aéroports (Nice Côte d'Azur, Cannes Mandelieu), les gares, et les hôtels de la région.
        </p>
      </SectionImageText>
    </div>
  </main>
</BaseLayout>



<script>
  // Gestion du formulaire de contact
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contact-form');
    const messageDiv = document.getElementById('form-message');

    if (form) {
      form.addEventListener('submit', async function(e) {
        e.preventDefault();

        // Désactiver le bouton pendant l'envoi
        const submitBtn = form.querySelector('button[type="submit"]');
        const originalText = submitBtn.textContent;
        submitBtn.disabled = true;
        submitBtn.textContent = 'Envoi en cours...';

        // Masquer les messages précédents
        messageDiv.className = 'form-message';
        messageDiv.textContent = '';

        try {
          const formData = new FormData(form);
          
          const response = await fetch('/', {
            method: 'POST',
            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
            body: new URLSearchParams(formData).toString()
          });

          if (response.ok) {
            messageDiv.className = 'form-message success';
            messageDiv.textContent = '✅ Message envoyé avec succès ! Nous vous répondrons dans les plus brefs délais.';
            form.reset();
          } else {
            throw new Error('Erreur lors de l\'envoi');
          }
        } catch (error) {
          messageDiv.className = 'form-message error';
          messageDiv.textContent = '❌ Une erreur est survenue. Veuillez réessayer ou nous contacter directement par téléphone au 06 16 55 28 11.';
        } finally {
          submitBtn.disabled = false;
          submitBtn.textContent = originalText;
        }
      });
    }
  });
</script>
